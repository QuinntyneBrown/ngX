angular.module("ngX",[]);var ngX;!function(e){e.Component=function(e){if(e.template||e.templateUrl){var t=e.selector.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}),r={controllerAs:"vm",controller:e.componentName||t+"Component",restrict:e.restrict||"E",template:e.template,templateUrl:e.templateUrl,replace:e.replace||!0,scope:e.scope||{}};angular.module(e.module).directive(t,[function(){return r}]),e.component.$inject=e.providers,angular.module(e.module).controller(e.componentName||t+"Component",e.component)}else e.dynamic?(e.component.$inject=e.providers,angular.module(e.module).service(e.componentName,e.component)):(e.component.$inject=e.providers,angular.module(e.module).controller(e.componentName,e.component),e.component.canActivate&&angular.module(e.module).config(["routeResolverServiceProvider",function(t){t.configure({route:e.route,routes:e.routes,key:e.key,promise:e.component.canActivate()})}]))}}(ngX||(ngX={}));var ngX;!function(e){"use strict";var t=function(){function e(){var e=this;this.configure=function(t){e._routePromises.push(t)},this.$get=["$injector","$q",function(t,r){return{resolve:function(o,n){e.routeParams=n;var i=r.defer(),u={},c=e.getRoutePromisesByRouteName(o);if(c.length<1)return r.when(!0);var a=e.reduceRoutePromisesByPriority(c);return e.invoke(t,r,a,0,function(){i.resolve(u)},u),i.promise}}}],this._routePromises=[],this.getRoutePromisesByRouteName=function(t){return e._routePromises.filter(function(e){return e.route?e.route===t:e.routes?e.routes.indexOf(t)>-1:!0})},this.reduceRoutePromisesByPriority=function(e){var t=[],r=[];return e.forEach(function(e){t.indexOf(e.priority)<0&&t.push(e.priority)}),t.forEach(function(o,n){r.push({promises:e.filter(function(e){return e.priority==o}),priority:o,isLast:n==t.length-1})}),r},this.invoke=function(t,r,o,n,i,u){var c=[],a=o[n];a.promises.forEach(function(e){c.push(t.invoke(e.promise))}),r.all(c).then(function(c){c.forEach(function(e,t){a.promises[t].key&&(u[a.promises[t].key]=c[t])}),a.isLast?i():e.invoke(t,r,o,n+1,i,u)})}}return Object.defineProperty(e.prototype,"routePromises",{get:function(){return this._routePromises.sort(function(e,t){return e.priority-t.priority})},enumerable:!0,configurable:!0}),e}();e.RouteResolverServiceProvider=t,angular.module("ngX").provider("routeResolverService",[t]).config(["$routeProvider",function(e){var t=e.when;e.when=function(){if(arguments[1]&&arguments[0]){var r=arguments[0];arguments[1].templateUrl=arguments[1].componentTemplateUrl||arguments[1].templateUrl,arguments[1].controller=arguments[1].componentName||arguments[1].controller,arguments[1].controllerAs="vm",arguments[1].resolve={routeData:["routeResolverService",function(e){return e.resolve(r)}]}}t.apply(e,arguments)}}]).run(["$injector","$location","$rootScope",function(e,t,r){r.$on("$viewContentLoaded",function(){var t=e.get("$route"),r=t.current.scope[t.current.controllerAs];r.onInit&&r.onInit()}),r.$on("$routeChangeStart",function(e,r,o){var n=o&&o.controllerAs?o.scope[o.controllerAs]:null;n&&n.canDeactivate&&!n.deactivated?(e.preventDefault(),n.canDeactivate().then(function(e){e&&(n.deactivated=!0,t.path(r.originalPath))})):n&&n.deactivate&&n.deactivate()})}])}(ngX||(ngX={}));